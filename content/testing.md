---
title: Тестирование
---

Тестирование приложения происходит на каждом этапе разработки до заливки, то есть:

- Перед заливкой на stage
- Перед заливкой на master

Помимо стандартных (явных) багов, приложение также переодически (1 раз в 2-3 релиза) должно тестироваться на:

- Производительность рендеринга
- Быструю загрузку, вес самого приложения
- Быстрый ответ серверной части
- Работа приложения при медленном интернете


# Автотесты
На данный момент автотестами (юнит-тестами) покрывается серверная часть. Каждый создаваемый модуль покрывается тестами, сами тесты не должны сильно задерживать время прохождения автотестов, если тест занимает слишком много времени на проверку функционала, то он написан неправильно.

Для клиентской части выполняется гибридное покрытие тестами. Для новых экранов _один раз_ пишутся E2E тесты, а на весь остальной функционал пишутся юнит-тесты. Если экран меняется, то E2E тесты модифицируются соответственно.

## Правила написания автотестов

В корне репозитория есть директория под названием `test/`, в ней находятся автотесты для серверной части.

Для клиентской части существует такая же директория, однако находится она внутри директории `client/`.

Каждый тест должен начинаться с ключевого слова `describe`, внутри которого должно описываться какое именно действие программного обеспечения тестируется. Внутри describe может быть n-ное количество кейсов (принято описывать их как `test`, а не `it`). Пример такого теста приведен внизу:

```javascript
///
// API: Создание комнаты
///
const supertest = require("supertest");
const app = require("../../index");

describe("API: Создание комнаты", () => {
  test("Создание одной комнаты", async () => {
    await supertest(app)
      .get("/room/create")
      .expect((res) => {
        expect(res.body).toHaveProperty("uuid");
      });
  });
});
```

<small>Пример теста из репозитория, который тестирует создание комнаты</small>

В тестах желательно не оставлять комментариев, для того чтобы код был локаничным и чистым. Технологии, которые используются для автотестов:

<div class="stack mt">
    <a
    class="stack__item"
    href="https://jestjs.io"
    target="_blank"
    rel="noreferrer"
  >
    <img
      src="https://www.vectorlogo.zone/logos/jestjsio/jestjsio-icon.svg"
      alt="jest"
    />
  </a>
  <a
    class="stack__item"
    href="https://www.cypress.io"
    target="_blank"
    rel="noreferrer"
  >
    <img
      src="https://raw.githubusercontent.com/simple-icons/simple-icons/6e46ec1fc23b60c8fd0d2f2ff46db82e16dbd75f/icons/cypress.svg"
      alt="cypress"
    />
  </a>
</div>