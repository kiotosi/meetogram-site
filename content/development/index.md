---
title: Процесс разработки
---

Разработка приложения состоит из нескольких частей:

- Постановка задач, которые будут в следующем релизе
- Оценивание продолжительности задач
- Разработка архитектуры
- Написание кода и правка решения, которое было предоставлено в архитектуре
- Заливка на Stage
- Тестирование
- Фикс багов
- Заливка на Master

# Постановка задачи
Все задачи, которые есть в проекте заносятся в Github Issues, а затем редактируются (приоритет, продолжительность) в [проекте](https://github.com/users/crackidocky/projects/3), который привязан к репозиторию.

Каждая задача в проекте выглядит следующим образом:

![Проект в Github](/development/gh-project.png)

<small>Одна из задач в Github Project</small>

Перед тем как взять задачу в работу, она сегментируется на более мелкие задачи.

Это нужно по двум причинам:

1. Таким образом можно будет понять когда задача закончена
2. Большую задачу невозможно выполнить за один раз

Если один из пунктов все равно кажется слишком большим и требует дополнительного сегментирования, то создается отдельный Issue, который крепится к исходному Issue. Дочерний Issue также подлежит сегментации на мини-задачи.

# Разработка архитектуры
Невозможно разработать большое приложение без архитектуры. Если это делать, то в конце-концов оно станет или неподлежащим внесению новых изменений или вовсе перестанет работать из-за того что в приложении будет много багов, которые исправятся только если менять архитектуру. Чтобы недопустить такого в meetogram к большим задачам разрабатываются архитектуры.

Полный их список можно найти [здесь](/architecture).

Ранее в meetogram использовался StarUML для того чтобы делать UML-модели приложения, однако из-за того что описание модели на UML занимает большое количество времени - было принято решение отказаться от UML вовсе, он иногда проскакивает в диаграммах классов и последовательности, но не более.

При разработке архитектуры есть несколько этапов, которые нужно пройти последовательно:

- Постановка задачи, описание идеи решения
- Решение какие новые технологии будут использоваться (если это нужно)
- Прописывание User-case'ов, для того чтобы позднее по ним написать автотесты
- Написание базовой структуры файлов и классов, которая понадобится при разработке

Только после прохождения данных этапов можно приступать к разработке приложения.

# Заливка на Stage и тестирование
Заливка на Stage происходит автоматически, после принятия пулл-реквеста на Stage. Все происходит автоматически благодаря [Github Actions](https://github.com/features/actions).

После того как в реквесте были проверены все файлы, а также проведено само-ревью - начинается этап тестирования. Stage-версия приложения всегда впереди версии на Master.

Сам процесс тестирования описан на странице [Тестирование](/testing).

## Как устроено разделение серверов?

Если посмотреть внутрь [репозитория](https://github.com/crackidocky/meetogram), то можно увидеть директорию `.github`, в которой есть директория `workflows`, это директория со сценариями для CI/CD в Github. Внутри есть два файла:

- `deploy.yml` - Отвечает за деплой приложения из мастера
- `deploy-stage.yml` - Отвечает за деплой приложения из стэйдж-ветки

Два эти файла отличаются только названиями приложения. Дело в том, что в процессе разработки было создано два экземпляра приложения на Heroku, один используется для тестов, а один для продакшена. Если посмотреть внутрь скрипта то там используются следуюшие [Github Secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets):

```yaml
# В deploy-stage:
heroku_app_name: ${{ secrets.HEROKU_STAGE_APP_NAME }}

# В deploy:
heroku_app_name: ${{ secrets.HEROKU_APP_NAME }}
```

<small>Сравнение `deploy.yml` и `deploy-stage.yml`</small>

Для того чтобы заливать на Heroku приложения не нужны разные API-ключи, нужно лишь указать разные названия приложений.

# Фикс багов
Максимальное количество багов фиксится _до_ заливки на stage. Если на stage попали определенные баги, которые были обнаружены уже после мерджа ветки фичи с stage, то тогда создаются отдельные задачи в Github Issues, которые будут устранять данные недочеты.